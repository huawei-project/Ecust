# 1. 数据目录结构
```
[1-92]                                  # 人员标签
    ├── multi/                          # 多光谱
    │   └── illum[1-3]/, normal/        # 干扰 `1-3`，无干扰
    │       ├── Multi_[1-7]_W1_1/       # 位置 `1-7`        无眼镜      每个位置目录下包括四个照片目录
    │       │   └── [1-4]/              #                              每个目录下包括25张图片文件
    │       │       └── [1-25].jpg
    │       ├── Multi_4_W1_6            # 位置 `4`          墨镜        目录下包括四个照片目录
    │       │   └── [1-4]/              #                              每个目录下包括25张图片文件
    │       │       └── [1-25].jpg
    │       └── Multi_[1-7]_W1_5        # 位置 `1-7`        眼镜        每个目录下包括25张图片文件， 部分人员无眼镜，即无该目录
    │           └── [1-25].jpg        
    └── rgb                             # 可见光
        └── illum[1-3]/, normal/        # 干扰 `1-3`，无干扰
            ├── RGB_[1-7]_W1_1/         # 位置 `1-7`        无眼镜      每个位置目录下包括四张照片文件
            │   └── [1-4].jpg
            ├── RGB_4_W1_6/             # 位置 `4`          墨镜        目录下包括四张照片文件
            │   └── [1-4].jpg
            └── RGB_[1-7]_W1_5.jpg      # 位置 `1-7`        眼镜        部分人员无眼镜，即无该图片
```

# 2. 实验

首先进行试验，确定合适的`configer`参数，在此基础上进行实验，在配置文件`config.py`中保存的参数下，获得良好的实验结果

![accuracy](images/accuracy.svg)
![logloss](images/logloss.svg)

## 3.1 划分比例的确定

> 确定在何种划分下进行实验，后续实验均以此结果为标准。

- 划分方式与上阶段一致，在每人的数据中，保留`Multi`与`RGB`同时检测出的图片路径，打乱后按一定比例划分；
- 本次实验划分时不做特殊处理，若需要其中指定条件的数据，可在`RecognizeDataset`中指定筛选条件`condition`；

运行
``` python
python gen_split.py

[split_112x96_[0.10:0.70:0.20]_[1]] n_items: 12227, n_train: 1160, n_valid: 8516, n_test: 2551, ratio: 0.095: 0.696: 0.209
[split_112x96_[0.10:0.70:0.20]_[2]] n_items: 12227, n_train: 1160, n_valid: 8516, n_test: 2551, ratio: 0.095: 0.696: 0.209
[split_112x96_[0.10:0.70:0.20]_[3]] n_items: 12227, n_train: 1160, n_valid: 8516, n_test: 2551, ratio: 0.095: 0.696: 0.209
[split_112x96_[0.10:0.70:0.20]_[4]] n_items: 12227, n_train: 1160, n_valid: 8516, n_test: 2551, ratio: 0.095: 0.696: 0.209
[split_112x96_[0.10:0.70:0.20]_[5]] n_items: 12227, n_train: 1160, n_valid: 8516, n_test: 2551, ratio: 0.095: 0.696: 0.209
[split_112x96_[0.20:0.60:0.20]_[1]] n_items: 12227, n_train: 2407, n_valid: 7280, n_test: 2540, ratio: 0.197: 0.595: 0.208
[split_112x96_[0.20:0.60:0.20]_[2]] n_items: 12227, n_train: 2407, n_valid: 7280, n_test: 2540, ratio: 0.197: 0.595: 0.208
[split_112x96_[0.20:0.60:0.20]_[3]] n_items: 12227, n_train: 2407, n_valid: 7280, n_test: 2540, ratio: 0.197: 0.595: 0.208
[split_112x96_[0.20:0.60:0.20]_[4]] n_items: 12227, n_train: 2407, n_valid: 7280, n_test: 2540, ratio: 0.197: 0.595: 0.208
[split_112x96_[0.20:0.60:0.20]_[5]] n_items: 12227, n_train: 2407, n_valid: 7280, n_test: 2540, ratio: 0.197: 0.595: 0.208
[split_112x96_[0.30:0.50:0.20]_[1]] n_items: 12227, n_train: 3621, n_valid: 6106, n_test: 2500, ratio: 0.296: 0.499: 0.204
[split_112x96_[0.30:0.50:0.20]_[2]] n_items: 12227, n_train: 3621, n_valid: 6106, n_test: 2500, ratio: 0.296: 0.499: 0.204
[split_112x96_[0.30:0.50:0.20]_[3]] n_items: 12227, n_train: 3621, n_valid: 6106, n_test: 2500, ratio: 0.296: 0.499: 0.204
[split_112x96_[0.30:0.50:0.20]_[4]] n_items: 12227, n_train: 3621, n_valid: 6106, n_test: 2500, ratio: 0.296: 0.499: 0.204
[split_112x96_[0.30:0.50:0.20]_[5]] n_items: 12227, n_train: 3621, n_valid: 6106, n_test: 2500, ratio: 0.296: 0.499: 0.204
[split_112x96_[0.40:0.40:0.20]_[1]] n_items: 12227, n_train: 4860, n_valid: 4860, n_test: 2507, ratio: 0.397: 0.397: 0.205
[split_112x96_[0.40:0.40:0.20]_[2]] n_items: 12227, n_train: 4860, n_valid: 4860, n_test: 2507, ratio: 0.397: 0.397: 0.205
[split_112x96_[0.40:0.40:0.20]_[3]] n_items: 12227, n_train: 4860, n_valid: 4860, n_test: 2507, ratio: 0.397: 0.397: 0.205
[split_112x96_[0.40:0.40:0.20]_[4]] n_items: 12227, n_train: 4860, n_valid: 4860, n_test: 2507, ratio: 0.397: 0.397: 0.205
[split_112x96_[0.40:0.40:0.20]_[5]] n_items: 12227, n_train: 4860, n_valid: 4860, n_test: 2507, ratio: 0.397: 0.397: 0.205
[split_112x96_[0.50:0.30:0.20]_[1]] n_items: 12227, n_train: 6106, n_valid: 3621, n_test: 2500, ratio: 0.499: 0.296: 0.204
[split_112x96_[0.50:0.30:0.20]_[2]] n_items: 12227, n_train: 6106, n_valid: 3621, n_test: 2500, ratio: 0.499: 0.296: 0.204
[split_112x96_[0.50:0.30:0.20]_[3]] n_items: 12227, n_train: 6106, n_valid: 3621, n_test: 2500, ratio: 0.499: 0.296: 0.204
[split_112x96_[0.50:0.30:0.20]_[4]] n_items: 12227, n_train: 6106, n_valid: 3621, n_test: 2500, ratio: 0.499: 0.296: 0.204
[split_112x96_[0.50:0.30:0.20]_[5]] n_items: 12227, n_train: 6106, n_valid: 3621, n_test: 2500, ratio: 0.499: 0.296: 0.204
[split_112x96_[0.60:0.20:0.20]_[1]] n_items: 12227, n_train: 7280, n_valid: 2404, n_test: 2543, ratio: 0.595: 0.197: 0.208
[split_112x96_[0.60:0.20:0.20]_[2]] n_items: 12227, n_train: 7280, n_valid: 2404, n_test: 2543, ratio: 0.595: 0.197: 0.208
[split_112x96_[0.60:0.20:0.20]_[3]] n_items: 12227, n_train: 7280, n_valid: 2404, n_test: 2543, ratio: 0.595: 0.197: 0.208
[split_112x96_[0.60:0.20:0.20]_[4]] n_items: 12227, n_train: 7280, n_valid: 2404, n_test: 2543, ratio: 0.595: 0.197: 0.208
[split_112x96_[0.60:0.20:0.20]_[5]] n_items: 12227, n_train: 7280, n_valid: 2404, n_test: 2543, ratio: 0.595: 0.197: 0.208
[split_112x96_[0.70:0.10:0.20]_[1]] n_items: 12227, n_train: 8516, n_valid: 1160, n_test: 2551, ratio: 0.696: 0.095: 0.209
[split_112x96_[0.70:0.10:0.20]_[2]] n_items: 12227, n_train: 8516, n_valid: 1160, n_test: 2551, ratio: 0.696: 0.095: 0.209
[split_112x96_[0.70:0.10:0.20]_[3]] n_items: 12227, n_train: 8516, n_valid: 1160, n_test: 2551, ratio: 0.696: 0.095: 0.209
[split_112x96_[0.70:0.10:0.20]_[4]] n_items: 12227, n_train: 8516, n_valid: 1160, n_test: 2551, ratio: 0.696: 0.095: 0.209
[split_112x96_[0.70:0.10:0.20]_[5]] n_items: 12227, n_train: 8516, n_valid: 1160, n_test: 2551, ratio: 0.696: 0.095: 0.209
```

在当前目录下，生成文件夹`split`，其目录结构如下
```
split
└── split_112x96_[比例]_[划分计数]
    ├── note.txt
    ├── test_Multi.txt
    ├── test_RGB.txt
    ├── train_Multi.txt
    ├── train_RGB.txt
    ├── valid_Multi.txt
    └── valid_RGB.txt
```

其中比例形式为`训练集：验证集：测试集`，划分计数为1~5。

- 各比例下进行5次随机划分，依次在比例为以下情况时进行实验；
- 统计各情况下5次准确率、损失值，并计算均值；
- 做出曲线；

``` shell
cd Ecust/louishsu/recognize_stage_2
python
>>> from main_update_config import main_3_1
>>> main_3_1()      # 训练、测试
>>> main_3_1(True)  # 输出文件到`images`
```

### Multi

准确率：
| count/比例 | 0.10: 0.70: 0.2 | 0.20: 0.60: 0.2 | 0.30: 0.50: 0.2 | 0.40: 0.40: 0.2 | 0.50: 0.30: 0.2 | 0.60: 0.20: 0.2 | 0.70: 0.10: 0.2 |
| --------: | ---------------: | ---------------: | ---------------: | ---------------: | ---------------: | ---------------: | ---------------: |
| 1 | 0.2149619311094284 | 0.8771556615829468 | 0.9566406011581421 | 0.9844896197319031 | 0.990234375 | 0.9869298934936523 | 0.994921863079071 |
| 2 | 0.20664063096046448 | 0.8104456067085266 | 0.9422104954719543 | 0.989062488079071 | 0.9906250238418579 | 0.9917968511581421 | 0.994140625 |
| 3 | 0.18599659204483032 | 0.9633825421333313 | 0.9828125238418579 | 0.979802131652832 | 0.9844209551811218 | 0.9945312738418579 | 0.9964548349380493 |
| 4 | 0.21216189861297607 | 0.7828124761581421 | 0.958984375 | 0.9877291917800903 | 0.9937499761581421 | 0.9948021769523621 | 0.9921283721923828 |
| 5 | 0.2265920341014862 | 0.8896991014480591 | 0.9828125238418579 | 0.9853854179382324 | 0.98828125 | 0.9952527284622192 | 0.9928801655769348 |
| average | 0.2092706173658371 | 0.8646990776062011 | 0.9646921038627625 | 0.9852937698364258 | 0.9894623160362244 | 0.9926625847816467 | 0.9941051721572876 |

损失值：
| count/比例 | 0.10: 0.70: 0.2 | 0.20: 0.60: 0.2 | 0.30: 0.50: 0.2 | 0.40: 0.40: 0.2 | 0.50: 0.30: 0.2 | 0.60: 0.20: 0.2 | 0.70: 0.10: 0.2 |
| --------: | ---------------: | ---------------: | ---------------: | ---------------: | ---------------: | ---------------: | ---------------: |
| 1 | 2.4846150875091553 | 0.5406866669654846 | 0.24240295588970184 | 0.08398889005184174 | 0.058236200362443924 | 0.06166341155767441 | 0.02826077677309513 |
| 2 | 2.491765022277832 | 0.7275170087814331 | 0.2726011872291565 | 0.08610193431377411 | 0.051581479609012604 | 0.04371415078639984 | 0.03160301595926285 |
| 3 | 2.616888999938965 | 0.2849043011665344 | 0.09661058336496353 | 0.1156279444694519 | 0.06800567358732224 | 0.029323657974600792 | 0.013814801350235939 |
| 4 | 2.54640531539917 | 0.7616688013076782 | 0.20859289169311523 | 0.08170180022716522 | 0.033651284873485565 | 0.034678198397159576 | 0.04227742925286293 |
| 5 | 2.4347915649414062 | 0.5256006717681885 | 0.0914262980222702 | 0.07377012819051743 | 0.0759594514966011 | 0.018698975443840027 | 0.033546604216098785 |
| average | 2.5148931980133056 | 0.5680754899978637 | 0.18232678323984147 | 0.08823813945055008 | 0.057486817985773084 | 0.03761567883193493 | 0.029900525510311127 |

作图如下
![图3.1.2](images/3_1_<figure>_[Multi].png)

### RGB

准确率：
| count/比例 | 0.10: 0.70: 0.2 | 0.20: 0.60: 0.2 | 0.30: 0.50: 0.2 | 0.40: 0.40: 0.2 | 0.50: 0.30: 0.2 | 0.60: 0.20: 0.2 | 0.70: 0.10: 0.2 |
| --------: | ---------------: | ---------------: | ---------------: | ---------------: | ---------------: | ---------------: | ---------------: |
| 1 | 0.08554687350988388 | 0.671122670173645 | 0.8922334909439087 | 0.911442756652832 | 0.94140625 | 0.95027095079422 | 0.9545693397521973 |
| 2 | 0.15312500298023224 | 0.5469183921813965 | 0.890625 | 0.9198749661445618 | 0.936718761920929 | 0.953005313873291 | 0.957812488079071 |
| 3 | 0.2632812559604645 | 0.5569299459457397 | 0.8770450353622437 | 0.9144531488418579 | 0.954296886920929 | 0.9526745676994324 | 0.951953113079071 |
| 4 | 0.1308889091014862 | 0.6347512006759644 | 0.8611213564872742 | 0.7824583649635315 | 0.9387637972831726 | 0.9556798934936523 | 0.9530658721923828 |
| 5 | 0.13710936903953552 | 0.6986255645751953 | 0.8792968988418579 | 0.9253906011581421 | 0.9442325830459595 | 0.95613032579422 | 0.9624999761581421 |
| average | 0.15399028211832047 | 0.6216695547103882 | 0.8800643563270569 | 0.8907239675521851 | 0.943083655834198 | 0.9535522103309632 | 0.9559801578521728 |

损失值：
| count/比例 | 0.10: 0.70: 0.2 | 0.20: 0.60: 0.2 | 0.30: 0.50: 0.2 | 0.40: 0.40: 0.2 | 0.50: 0.30: 0.2 | 0.60: 0.20: 0.2 | 0.70: 0.10: 0.2 |
| --------: | ---------------: | ---------------: | ---------------: | ---------------: | ---------------: | ---------------: | ---------------: |
| 1 | 3.252647876739502 | 1.3402305841445923 | 0.6356235146522522 | 0.6834784746170044 | 0.30298250913619995 | 0.2781504988670349 | 0.2755158841609955 |
| 2 | 2.7481565475463867 | 1.6343910694122314 | 0.5718763470649719 | 0.45795875787734985 | 0.388595312833786 | 0.27012720704078674 | 0.255297988653183 |
| 3 | 2.497880458831787 | 1.5152888298034668 | 0.6399282217025757 | 0.47438138723373413 | 0.25746339559555054 | 0.28221434354782104 | 0.27349966764450073 |
| 4 | 2.7885241508483887 | 1.2938731908798218 | 0.8670710325241089 | 1.0074412822723389 | 0.32476240396499634 | 0.22587835788726807 | 0.29859524965286255 |
| 5 | 2.7365176677703857 | 1.3123371601104736 | 0.6363851428031921 | 0.5015788674354553 | 0.330943763256073 | 0.28889214992523193 | 0.2208179533481598 |
| average | 2.80474534034729 | 1.419224166870117 | 0.6701768517494202 | 0.6249677538871765 | 0.3209494769573212 | 0.2690525114536285 | 0.26474534869194033 |

作图如下
![图3.1.2](images/3_1_<figure>_[RGB].png)

可知比例为`0.50: 0.30: 0.2`时，效果最佳。

## 3.2 波段对比实验

- 根据[实验3.1](#31-%e5%88%92%e5%88%86%e6%af%94%e4%be%8b%e7%9a%84%e7%a1%ae%e5%ae%9a)得到的最优划分，在5次随机划分进行实验；
- 依次选择单个波段的数据进行实验；
- 统计各情况下5次准确率、损失值，并计算均值；
- 做出曲线；

``` shell
cd Ecust/louishsu/recognize_stage_2
python
>>> from main_update_config import main_3_2
>>> main_3_2()      # 训练、测试
>>> main_3_2(True)  # 输出文件到`images`
```

### Multi

准确率：
| count/波段索引 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 | 24 | 25 |
| ----------: | -: | -: | -: | -: | -: | -: | -: | -: | -: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: |
| 1 | 0.9887 | 0.9863 | 0.9891 | 0.9898 | 0.9863 | 0.993 | 0.9899 | 0.9871 | 0.9867 | 0.9793000000000001 | 0.9863 | 0.9867 | 0.9895 | 0.9871 | 0.9902 | 0.9898 | 0.9902 | 0.9887 | 0.991 | 0.9926 | 0.9891 | 0.9836 | 0.9859 | 0.9883 | 0.9848 |
| 2 | 0.9903 | 0.9898 | 0.993 | 0.991 | 0.9859 | 0.9891 | 0.991 | 0.9918 | 0.9895 | 0.9898 | 0.9918 | 0.9856 | 0.9902 | 0.9887 | 0.9887 | 0.9902 | 0.9879000000000001 | 0.9836 | 0.9945 | 0.9895 | 0.9906 | 0.9937 | 0.9934000000000001 | 0.9937 | 0.9879000000000001 |
| 3 | 0.9914000000000001 | 0.9883 | 0.9865 | 0.9790000000000001 | 0.9915 | 0.9864 | 0.9879000000000001 | 0.9922 | 0.9883 | 0.9817 | 0.9861 | 0.9903 | 0.9884000000000001 | 0.9875 | 0.991 | 0.9922 | 0.9899 | 0.9821 | 0.9887 | 0.9911 | 0.9906999999999999 | 0.9902 | 0.993 | 0.9899 | 0.9849 |
| 4 | 0.9906 | 0.9871 | 0.9883 | 0.9887 | 0.9863 | 0.9848 | 0.9918 | 0.9926 | 0.9898 | 0.993 | 0.9887 | 0.9898 | 0.9883 | 0.9934000000000001 | 0.9843999999999999 | 0.9918 | 0.9871 | 0.9906 | 0.9914000000000001 | 0.9852 | 0.9922 | 0.9875 | 0.9934000000000001 | 0.9922 | 0.9875 |
| 5 | 0.9854999999999999 | 0.9836 | 0.9898 | 0.9887 | 0.9887 | 0.9840000000000001 | 0.9898 | 0.9852 | 0.9898 | 0.9883 | 0.9914000000000001 | 0.9879000000000001 | 0.9914000000000001 | 0.9887 | 0.9883 | 0.9867 | 0.9922 | 0.991 | 0.9871 | 0.9843999999999999 | 0.9859 | 0.9898 | 0.9871 | 0.9871 | 0.9914000000000001 |
| average | 0.9893000000000001 | 0.98702 | 0.98934 | 0.98744 | 0.98774 | 0.9874600000000001 | 0.9900800000000001 | 0.98978 | 0.9888199999999999 | 0.9864200000000001 | 0.9888600000000001 | 0.9880599999999999 | 0.9895600000000002 | 0.9890800000000001 | 0.98852 | 0.99014 | 0.98946 | 0.9872 | 0.99054 | 0.98856 | 0.9896999999999998 | 0.98896 | 0.99056 | 0.99024 | 0.9873000000000001 |

损失值：
| count/波段索引 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 | 24 | 25 |
| ----------: | -: | -: | -: | -: | -: | -: | -: | -: | -: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: |
| 1 | 0.0516 | 0.0541 | 0.0638 | 0.0478 | 0.0762 | 0.0264 | 0.0643 | 0.0619 | 0.0703 | 0.1034 | 0.0847 | 0.0693 | 0.0548 | 0.0722 | 0.0533 | 0.0613 | 0.0431 | 0.055 | 0.0346 | 0.0509 | 0.05 | 0.0805 | 0.0849 | 0.047 | 0.0744 |
| 2 | 0.0491 | 0.0606 | 0.0412 | 0.0649 | 0.06 | 0.056 | 0.0395 | 0.0391 | 0.0644 | 0.0483 | 0.0558 | 0.0795 | 0.0463 | 0.0577 | 0.0586 | 0.0661 | 0.0591 | 0.0956 | 0.0221 | 0.0517 | 0.0675 | 0.0317 | 0.047 | 0.0291 | 0.0628 |
| 3 | 0.0457 | 0.0671 | 0.1209 | 0.1393 | 0.0512 | 0.0729 | 0.0731 | 0.0612 | 0.078 | 0.0939 | 0.0692 | 0.0448 | 0.0655 | 0.073 | 0.0537 | 0.0575 | 0.0728 | 0.1082 | 0.0567 | 0.0536 | 0.0597 | 0.061 | 0.0629 | 0.069 | 0.0767 |
| 4 | 0.0518 | 0.0736 | 0.0646 | 0.0554 | 0.0784 | 0.0901 | 0.0464 | 0.0375 | 0.0513 | 0.0311 | 0.0495 | 0.0882 | 0.0531 | 0.0418 | 0.0785 | 0.0445 | 0.0796 | 0.0562 | 0.0444 | 0.072 | 0.0269 | 0.0603 | 0.0468 | 0.0432 | 0.0629 |
| 5 | 0.1029 | 0.0867 | 0.0688 | 0.0748 | 0.0636 | 0.0986 | 0.0693 | 0.0856 | 0.0589 | 0.0751 | 0.0368 | 0.0678 | 0.0537 | 0.0694 | 0.0484 | 0.0685 | 0.0577 | 0.0513 | 0.0744 | 0.0795 | 0.0711 | 0.0503 | 0.0731 | 0.0859 | 0.0655 |
| average | 0.060219999999999996 | 0.06842000000000001 | 0.07186 | 0.07644 | 0.06588 | 0.0688 | 0.058519999999999996 | 0.05706 | 0.06458 | 0.07036 | 0.059199999999999996 | 0.06992000000000001 | 0.05467999999999999 | 0.06282000000000001 | 0.058499999999999996 | 0.05958 | 0.06246 | 0.07326000000000002 | 0.046439999999999995 | 0.061540000000000004 | 0.05504 | 0.05676 |

作图如下
![图3.2.1](images/3_2_<figure>_[Multi].png)

### RGB

准确率：
| count/波段索引 | R | G | B |
| ----------: | -: | -: | -: |
| 1 | 0.9227 | 0.9418000000000001 | 0.9262 |
| 2 | 0.9351999999999999 | 0.9223 | 0.9362999999999999 |
| 3 | 0.9254000000000001 | 0.9488 | 0.9370999999999999 |
| 4 | 0.9273 | 0.9161 | 0.9351999999999999 |
| 5 | 0.9398000000000001 | 0.9161 | 0.9223 |
| average | 0.93008 | 0.9290200000000001 | 0.9314199999999999 |

损失值：
| count/波段索引 | R | G | B |
| ----------: | -: | -: | -: |
| 1 | 0.4225 | 0.3349 | 0.3758 |
| 2 | 0.428 | 0.5199 | 0.3878 |
| 3 | 0.4294 | 0.3031 | 0.3737 |
| 4 | 0.4032 | 0.4461 | 0.3823 |
| 5 | 0.3114 | 0.4865 | 0.4001 |
| average | 0.3989 | 0.4181 | 0.38394000000000006 |

作图如下
![图3.2.2](images/3_2_<figure>_[RGB].png)

根据图3.2.1.1，按准确率将波段排序，降序排序如下：
``` shell
Generating tables and figures [Multi]...
Best:  [23 19 24 16  7  8 21 13 17  3  1 14 22 11  9 20 15 12  5  6  4 25 18  2
 10]
Generating tables and figures [RGB]...
Best:  [3 1 2]
```

## 3.3 波段组合实验

> 该部分实验仅针对多光谱数据。

- 根据[实验3.1](#31-%e5%88%92%e5%88%86%e6%af%94%e4%be%8b%e7%9a%84%e7%a1%ae%e5%ae%9a)得到的最优划分，在5次随机划分进行实验；
- 根据[实验3.2](#32-%e6%b3%a2%e6%ae%b5%e5%af%b9%e6%af%94%e5%ae%9e%e9%aa%8c)得到的最优排序，依次选择最前1, 2, ..., 25个波段进行组合实验；
- 统计各情况下5次准确率、损失值，并计算均值；
- 做出曲线；


``` shell
cd Ecust/louishsu/recognize_stage_2
python
>>> from main_update_config import main_3_3
>>> main_3_3()      # 训练、测试
>>> main_3_3(True)  # 输出文件到`images`
```

准确率：
| count/组合数 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 | 24 | 25 |
| ---------: | -: | -: | -: | -: | -: | -: | -: | -: | -: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: |
| 1 | 0.9859 | 0.989453136920929 | 0.9886718988418579 | 0.98828125 | 0.9878906011581421 | 0.989453136920929 | 0.989062488079071 | 0.985156238079071 | 0.991406261920929 | 0.990234375 | 0.9867187738418579 | 0.986328125 | 0.9886718988418579 | 0.987500011920929 | 0.9867187738418579 | 0.9898437261581421 | 0.982421875 | 0.987109363079071 | 0.98828125 | 0.987109363079071 | 0.9898437261581421 | 0.9925781488418579 | 0.9887178540229797 | 0.989062488079071 | 0.991406261920929 |
| 2 | 0.9934000000000001 | 0.9887178540229797 | 0.9922334551811218 | 0.98828125 | 0.9906250238418579 | 0.991015613079071 | 0.987109363079071 | 0.9917968511581421 | 0.9878906011581421 | 0.989453136920929 | 0.992968738079071 | 0.989062488079071 | 0.994921863079071 | 0.987500011920929 | 0.990234375 | 0.992968738079071 | 0.991406261920929 | 0.990234375 | 0.994921863079071 | 0.991015613079071 | 0.986328125 | 0.9921875 | 0.9906250238418579 | 0.9921875 | 0.991015613079071 |
| 3 | 0.993 | 0.9925781488418579 | 0.991015613079071 | 0.9829044342041016 | 0.9879825711250305 | 0.9879366159439087 | 0.9902803301811218 | 0.9902803301811218 | 0.9852021932601929 | 0.9871553182601929 | 0.9898897409439087 | 0.9906250238418579 | 0.9875919222831726 | 0.9879366159439087 | 0.994140625 | 0.989062488079071 | 0.9898897409439087 | 0.9926241040229797 | 0.9902803301811218 | 0.9867187738418579 | 0.98828125 | 0.989062488079071 | 0.9860294461250305 | 0.9895450472831726 | 0.990234375 |
| 4 | 0.9934000000000001 | 0.9925781488418579 | 0.9906250238418579 | 0.9937499761581421 | 0.98828125 | 0.987109363079071 | 0.989062488079071 | 0.9921875 | 0.991406261920929 | 0.989453136920929 | 0.9921875 | 0.993359386920929 | 0.9886718988418579 | 0.9898437261581421 | 0.9921875 | 0.9917968511581421 | 0.9937499761581421 | 0.991406261920929 | 0.9937499761581421 | 0.9925781488418579 | 0.994140625 | 0.990234375 | 0.9898437261581421 | 0.991015613079071 | 0.9917968511581421 |
| 5 | 0.9871 | 0.989453136920929 | 0.9847656488418579 | 0.989062488079071 | 0.9898437261581421 | 0.9847656488418579 | 0.9898437261581421 | 0.991406261920929 | 0.9886718988418579 | 0.9898437261581421 | 0.9828125238418579 | 0.990234375 | 0.9906250238418579 | 0.985546886920929 | 0.9878906011581421 | 0.98828125 | 0.9839843511581421 | 0.98828125 | 0.9878906011581421 | 0.990234375 | 0.991015613079071 | 0.9886718988418579 | 0.990234375 | 0.987109363079071 | 0.9878906011581421 |
| average | 0.99056 | 0.9905560851097107 | 0.9894623279571533 | 0.988455879688263 | 0.9889246344566345 | 0.9880560755729675 | 0.9890716791152954 | 0.9901654362678528 | 0.9889154434204102 | 0.9892279386520386 | 0.9889154553413391 | 0.9899218797683715 | 0.9900965213775634 | 0.9876654505729675 | 0.990234375 | 0.9903906106948852 | 0.9882904410362243 | 0.989931070804596 | 0.9910248041152954 | 0.9895312547683716 | 0.9899218678474426 | 0.9905468821525574 | 0.989090085029602 | 0.9897840023040771 | 0.9904687404632568 |

损失值：
| count/组合数 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 | 24 | 25 |
| ---------: | -: | -: | -: | -: | -: | -: | -: | -: | -: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: | --: |
| 1 | 0.0849 | 0.04418618232011795 | 0.05667092278599739 | 0.05520736053586006 | 0.06052742153406143 | 0.04886102303862572 | 0.04623248428106308 | 0.08218537271022797 | 0.03674289584159851 | 0.04844875633716583 | 0.05512586981058121 | 0.07802615314722061 | 0.04889298602938652 | 0.06302084028720856 | 0.07144192606210709 | 0.046715132892131805 | 0.07809802144765854 | 0.05989839881658554 | 0.06055719777941704 | 0.06939728558063507 | 0.04651248827576637 | 0.032759178429841995 | 0.050806235522031784 | 0.03725248947739601 | 0.0470258891582489 |
| 2 | 0.047 | 0.06396504491567612 | 0.035303931683301926 | 0.07225267589092255 | 0.058264702558517456 | 0.038788359612226486 | 0.06979593634605408 | 0.05094729736447334 | 0.06264030188322067 | 0.05534311383962631 | 0.03846440091729164 | 0.061827369034290314 | 0.021031111478805542 | 0.053167443722486496 | 0.04131854325532913 | 0.049748849123716354 | 0.05190135911107063 | 0.04999634623527527 | 0.04627680405974388 | 0.03879891335964203 | 0.06878949701786041 | 0.049548953771591187 | 0.05395243316888809 | 0.03211814537644386 | 0.05130425840616226 |
| 3 | 0.0629 | 0.04650916904211044 | 0.06114254519343376 | 0.11013656854629517 | 0.0874512791633606 | 0.05607603117823601 | 0.052649665623903275 | 0.05620185658335686 | 0.07743848115205765 | 0.08428958803415298 | 0.07900545746088028 | 0.056578051298856735 | 0.06537581980228424 | 0.06450963765382767 | 0.026308823376893997 | 0.068466916680336 | 0.04980282485485077 | 0.05000502988696098 | 0.06697511672973633 | 0.08159539103507996 | 0.09204110503196716 | 0.07604489475488663 | 0.08065575361251831 | 0.058304596692323685 | 0.06850780546665192 |
| 4 | 0.0468 | 0.03698722645640373 | 0.06845482438802719 | 0.04799146205186844 | 0.055125992745161057 | 0.06826183199882507 | 0.04894346743822098 | 0.0523565299808979 | 0.0583837553858757 | 0.0796610563993454 | 0.04481218010187149 | 0.04559766501188278 | 0.05031302571296692 | 0.05200613662600517 | 0.048296377062797546 | 0.036620959639549255 | 0.03258177265524864 | 0.048274051398038864 | 0.04378810152411461 | 0.05666971206665039 | 0.0511159785091877 | 0.0504719540476799 | 0.06533845514059067 | 0.04923015087842941 | 0.03390287607908249 |
| 5 | 0.0731 | 0.07956121861934662 | 0.08703341335058212 | 0.06868435442447662 | 0.07599598914384842 | 0.08335371315479279 | 0.05388672277331352 | 0.0604909248650074 | 0.06463289260864258 | 0.05977126210927963 | 0.10748422145843506 | 0.06750474870204926 | 0.06418246030807495 | 0.07875166833400726 | 0.06537383794784546 | 0.05097449943423271 | 0.06940876692533493 | 0.04929100349545479 | 0.07051213830709457 | 0.08407305926084518 | 0.06149819493293762 | 0.06938845664262772 | 0.04945795238018036 | 0.07711869478225708 | 0.0807727724313736 |
| average | 0.06294000000000001 | 0.054241768270730975 | 0.06172112748026848 | 0.07085448428988457 | 0.06747307702898979 | 0.059068191796541214 | 0.054301655292510985 | 0.06043639630079269 | 0.05996766537427902 | 0.06550275534391403 | 0.06497842594981193 | 0.06190679743885994 | 0.04995908066630363 | 0.06229114532470703 | 0.050547901540994644 | 0.050505271553993224 | 0.056358548998832705 | 0.05149296596646309 | 0.05762187168002129 | 0.06610687226057052 | 0.06399145275354386 | 0.05564268752932548 | 0.06004216596484184 | 0.05080481544137001 | 0.056302720308303834 |

作图如下
![图3.3.1](images/3_3_<figure>_[Multi].png)

## 3.4 光谱分辨率实验

> 该部分实验仅针对多光谱数据。

- 根据[实验3.1](#31-%e5%88%92%e5%88%86%e6%af%94%e4%be%8b%e7%9a%84%e7%a1%ae%e5%ae%9a)得到的最优划分，在5次随机划分进行实验；
- 依次选择步长为1, 2, ..., 25，进行组合波段实验
- 统计各情况下5次准确率、损失值，并计算均值；
- 做出曲线；

``` shell
cd Ecust/louishsu/recognize_stage_2
python
>>> from main_update_config import main_3_4
>>> main_3_4()      # 训练、测试
>>> main_3_4(True)  # 输出文件到`images`
```

准确率：
| count\波段步长 |  1 |  2 |  3 |  4 |  5 |  6 |  7 |  8 |  9 | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 | 24 | 25 |
| :-----------: | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- |
| 1             |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |
| 2             |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |
| 3             |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |
| 4             |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |
| 5             |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |
| average       |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |

损失值：
| count\波段步长 |  1 |  2 |  3 |  4 |  5 |  6 |  7 |  8 |  9 | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 | 24 | 25 |
| :-----------: | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- |
| 1             |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |
| 2             |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |
| 3             |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |
| 4             |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |
| 5             |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |
| average       |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |

作图如下
![图3.4](TODO)

## 3.5 鲁棒性实验

- 根据[实验3.1](#31-%e5%88%92%e5%88%86%e6%af%94%e4%be%8b%e7%9a%84%e7%a1%ae%e5%ae%9a)得到的最优划分，在5次随机划分进行实验；
- 选用全部波段进行实验；
- 统计5次实验中，改变条件得到表格；
- 做出曲线

``` shell
cd Ecust/louishsu/recognize_stage_2
python
>>> from main_update_config import main_3_5
>>> main_3_5()      # 训练、测试
>>> main_3_5(True)  # 输出文件到`images`
```

### 3.5.1 干扰种类

统计无干扰、干扰1、干扰2、干扰3下，每次实验的准确率、损失

准确率
| count\干扰种类 | 无干扰 | 干扰1 | 干扰2 | 干扰3 |
| :-----------: | ----- | ---- | ---- | ---- | 
| 1             |       |      |      |      |
| 2             |       |      |      |      |
| 3             |       |      |      |      |
| 4             |       |      |      |      |
| 5             |       |      |      |      |
| average       |       |      |      |      |

损失值
| count\干扰种类 | 无干扰 | 干扰1 | 干扰2 | 干扰3 |
| :-----------: | ----- | ---- | ---- | ---- | 
| 1             |       |      |      |      |
| 2             |       |      |      |      |
| 3             |       |      |      |      |
| 4             |       |      |      |      |
| 5             |       |      |      |      |
| average       |       |      |      |      |

作图如下
![图3.5.1](TODO)

### 3.5.2 偏转角度

统计各角度下，每次实验的准确率、损失

准确率
| count\偏转角度 |  1 |  2 |  3 |  4 |  5 |  6 |  7 |
| :-----------: | -- | -- | -- | -- | -- | -- | -- |
| 1             |    |    |    |    |    |    |    |
| 2             |    |    |    |    |    |    |    |
| 3             |    |    |    |    |    |    |    |
| 4             |    |    |    |    |    |    |    |
| 5             |    |    |    |    |    |    |    |
| average       |    |    |    |    |    |    |    |

损失值
| count\偏转角度 |  1 |  2 |  3 |  4 |  5 |  6 |  7 |
| :-----------: | -- | -- | -- | -- | -- | -- | -- |
| 1             |    |    |    |    |    |    |    |
| 2             |    |    |    |    |    |    |    |
| 3             |    |    |    |    |    |    |    |
| 4             |    |    |    |    |    |    |    |
| 5             |    |    |    |    |    |    |    |
| average       |    |    |    |    |    |    |    |

作图如下
![图3.5.2](TODO)

### 3.5.3 遮挡实验

统计无眼镜、近视眼镜、太阳镜下，每次实验的准确率、损失

准确率
| count\眼镜种类 |  1(无眼镜) |  5(近视眼镜) |  3(太阳镜) |
| :-----------: | --------- | ---------- | ---------- | 
| 1             |           |            |            |
| 2             |           |            |            |
| 3             |           |            |            |
| 4             |           |            |            |
| 5             |           |            |            |
| average       |           |            |            |

损失值
| count\眼镜种类 |  1(无眼镜) |  5(近视眼镜) |  3(太阳镜) |
| :-----------: | --------- | ---------- | ---------- | 
| 1             |           |            |            |
| 2             |           |            |            |
| 3             |           |            |            |
| 4             |           |            |            |
| 5             |           |            |            |
| average       |           |            |            |

作图如下
![图3.5.3](TODO)
